{"ast":null,"code":"import _objectSpread from\"/Users/katejohnson/Desktop/shop-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/katejohnson/Desktop/shop-shop/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import{useQuery}from'@apollo/client';import{useStoreContext}from'../utils/GlobalState';import{REMOVE_FROM_CART,UPDATE_CART_QUANTITY,ADD_TO_CART,UPDATE_PRODUCTS}from'../utils/actions';import{QUERY_PRODUCTS}from'../utils/queries';import spinner from'../assets/spinner.gif';import Cart from'../components/Cart';function Detail(){var _useStoreContext=useStoreContext(),_useStoreContext2=_slicedToArray(_useStoreContext,2),state=_useStoreContext2[0],dispatch=_useStoreContext2[1];var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),currentProduct=_useState2[0],setCurrentProduct=_useState2[1];var _useQuery=useQuery(QUERY_PRODUCTS),loading=_useQuery.loading,data=_useQuery.data;var products=state.products,cart=state.cart;useEffect(function(){if(products.length){setCurrentProduct(products.find(function(product){return product._id===id;}));}else if(data){dispatch({type:UPDATE_PRODUCTS,products:data.products});}},[products,data,dispatch,id]);var addToCart=function addToCart(){var itemInCart=cart.find(function(cartItem){return cartItem._id===id;});if(itemInCart){dispatch({type:UPDATE_CART_QUANTITY,_id:id,purchaseQuantity:parseInt(itemInCart.purchaseQuantity)+1});}else{dispatch({tyoe:ADD_TO_CART,product:_objectSpread(_objectSpread({},currentProduct),{},{purchaseQuantity:1})});}};var removeFromCart=function removeFromCart(){dispatch({type:REMOVE_FROM_CART,_id:currentProduct._id});};return/*#__PURE__*/React.createElement(React.Fragment,null,currentProduct?/*#__PURE__*/React.createElement(\"div\",{className:\"container my-1\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},\"\\u2190 Back to Products\"),/*#__PURE__*/React.createElement(\"h2\",null,currentProduct.name),/*#__PURE__*/React.createElement(\"p\",null,currentProduct.description),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Price:\"),\"$\",currentProduct.price,' ',/*#__PURE__*/React.createElement(\"button\",{onClick:addToCart},\"Add to Cart\"),/*#__PURE__*/React.createElement(\"button\",{disabled:!cart.find(function(p){return p._id===currentProduct._id;}),onClick:removeFromCart},\"Remove from Cart\")),/*#__PURE__*/React.createElement(\"img\",{src:\"/images/\".concat(currentProduct.image),alt:currentProduct.name})):null,loading?/*#__PURE__*/React.createElement(\"img\",{src:spinner,alt:\"loading\"}):null,/*#__PURE__*/React.createElement(Cart,null));}export default Detail;","map":{"version":3,"sources":["/Users/katejohnson/Desktop/shop-shop/client/src/pages/Detail.js"],"names":["React","useEffect","useState","Link","useParams","useQuery","useStoreContext","REMOVE_FROM_CART","UPDATE_CART_QUANTITY","ADD_TO_CART","UPDATE_PRODUCTS","QUERY_PRODUCTS","spinner","Cart","Detail","state","dispatch","id","currentProduct","setCurrentProduct","loading","data","products","cart","length","find","product","_id","type","addToCart","itemInCart","cartItem","purchaseQuantity","parseInt","tyoe","removeFromCart","name","description","price","p","image"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport { useQuery } from '@apollo/client'\nimport { useStoreContext } from '../utils/GlobalState'\nimport {\n  REMOVE_FROM_CART,\n  UPDATE_CART_QUANTITY,\n  ADD_TO_CART,\n  UPDATE_PRODUCTS,\n} from '../utils/actions'\n\nimport { QUERY_PRODUCTS } from '../utils/queries'\nimport spinner from '../assets/spinner.gif'\nimport Cart from '../components/Cart'\n\nfunction Detail() {\n  const [state, dispatch] = useStoreContext()\n  const { id } = useParams()\n\n  const [currentProduct, setCurrentProduct] = useState({})\n\n  const { loading, data } = useQuery(QUERY_PRODUCTS)\n\n  const { products, cart } = state\n\n  useEffect(() => {\n    if (products.length) {\n      setCurrentProduct(products.find((product) => product._id === id))\n    } else if (data) {\n      dispatch({\n        type: UPDATE_PRODUCTS,\n        products: data.products,\n      })\n    }\n  }, [products, data, dispatch, id])\n\n  const addToCart = () => {\n    const itemInCart = cart.find((cartItem) => cartItem._id === id)\n    if (itemInCart) {\n      dispatch({\n        type: UPDATE_CART_QUANTITY,\n        _id: id,\n        purchaseQuantity: parseInt(itemInCart.purchaseQuantity) + 1,\n      })\n    } else {\n      dispatch({\n        tyoe: ADD_TO_CART,\n        product: { ...currentProduct, purchaseQuantity: 1 },\n      })\n    }\n  }\n\n  const removeFromCart = () => {\n    dispatch({\n      type: REMOVE_FROM_CART,\n      _id: currentProduct._id\n    })\n  }\n\n  return (\n    <>\n      {currentProduct ? (\n        <div className=\"container my-1\">\n          <Link to=\"/\">‚Üê Back to Products</Link>\n\n          <h2>{currentProduct.name}</h2>\n\n          <p>{currentProduct.description}</p>\n\n          <p>\n            <strong>Price:</strong>${currentProduct.price}{' '}\n            <button onClick={addToCart}>Add to Cart</button>\n            <button\n              disabled={!cart.find(p => p._id === currentProduct._id)}\n              onClick={removeFromCart}\n            >Remove from Cart</button>\n          </p>\n\n          <img\n            src={`/images/${currentProduct.image}`}\n            alt={currentProduct.name}\n          />\n        </div>\n      ) : null}\n      {loading ? <img src={spinner} alt=\"loading\" /> : null}\n      <Cart />\n    </>\n  )\n}\n\nexport default Detail\n"]},"metadata":{},"sourceType":"module"}